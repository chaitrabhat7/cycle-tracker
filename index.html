<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Menstrual Cycle Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f7f7fb; padding:40px; }
    .card { max-width:520px; background:#fff; padding:24px; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,0.08); }
    h1 { font-size:20px; margin-bottom:20px; }
    label { display:block; margin-top:12px; font-weight:bold; }
    input { width:100%; padding:8px; margin-top:6px; border-radius:6px; border:1px solid #ccc; }
    input[disabled] { background:#eee; }
    table { width:100%; border-collapse:collapse; margin-top:16px; font-size:14px; }
    th, td { border-bottom:1px solid #ddd; padding:6px; text-align:left; }
    .good { color:green; font-weight:bold; }
    .bad { color:red; font-weight:bold; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Menstrual Cycle Dashboard</h1>

    <label>Previous Cycle Start Date (auto-filled)</label>
    <input type="date" id="prevDate" disabled />

    <label>Current Cycle Start Date</label>
    <input type="date" id="currentDate" />

    
    <p>Average Cycle Length: <strong><span id="avg">—</span> days</strong></p>
    <p>Predicted Next Cycle Start: <strong><span id="next">—</span></strong></p>

    <h3>History</h3>
    <table>
      <thead>
        <tr><th>Cycle Start</th><th>Length</th><th>Typical</th></tr>
      </thead>
      <tbody id="historyBody"></tbody>
    </table>
  </div>

<script>
// ===== BASELINE HISTORY (REVERSE CHRONOLOGICAL) =====
const history = [
  { start: '2025-12-16', length: 33 },
  { start: '2025-11-13', length: 26 },
  { start: '2025-10-18', length: 31 },
  { start: '2025-09-17', length: 35 },
  { start: '2025-08-13', length: 30 },
  { start: '2025-07-14', length: 24 },
  { start: '2025-06-20', length: 26 },
  { start: '2025-05-25', length: 32 },
  { start: '2025-04-23', length: 27 },
  { start: '2025-03-27', length: 32 },
  { start: '2025-02-23', length: 26 },
  { start: '2025-01-28', length: 25 },
  { start: '2025-01-03', length: 30 },
  { start: '2024-12-04', length: 28 },
  { start: '2024-11-06', length: 31 },
  { start: '2024-10-06', length: 24 },
  { start: '2024-09-12', length: 26 },
  { start: '2024-08-17', length: 27 },
  { start: '2024-07-21', length: 29 },
  { start: '2024-06-22', length: 24 },
  { start: '2024-05-29', length: 33 },
  { start: '2024-04-26', length: 31 },
  { start: '2024-03-26', length: 28 },
  { start: '2024-02-27', length: 30 },
  { start: '2024-01-28', length: 31 }
];

// ===== ELEMENTS =====
const prevInput = document.getElementById('prevDate');
const currInput = document.getElementById('currentDate');
const lengthEl = document.getElementById('length');
const rangeEl = document.getElementById('range');
const avgEl = document.getElementById('avg');
const nextEl = document.getElementById('next');
const tbody = document.getElementById('historyBody');

// ===== RENDER HISTORY =====
history.forEach(c => {
  const tr = document.createElement('tr');
  tr.innerHTML = `<td>${c.start}</td><td>${c.length}</td><td class="good">Yes</td>`;
  tbody.appendChild(tr);
});

// ===== AUTO-FILL PREVIOUS CYCLE =====
prevInput.value = history[0].start;

// ===== CALCULATE AVERAGE =====
const avg = Math.round(history.reduce((s, c) => s + c.length, 0) / history.length);
avgEl.textContent = avg;

// ===== PREDICT NEXT CYCLE =====
const latest = new Date(history[0].start);
latest.setDate(latest.getDate() + avg);
const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
const d = latest.getDate();
const m = months[latest.getMonth()];
nextEl.textContent = `${d} ${m}`; // formatted as: date Month().split('T')[0];

// ===== HANDLE CURRENT DATE INPUT =====
currInput.addEventListener('change', () => {
  const prev = new Date(prevInput.value);
  const curr = new Date(currInput.value);
  const diff = Math.round((curr - prev) / (1000 * 60 * 60 * 24));
  lengthEl.textContent = diff;
  if (diff >= 21 && diff <= 35) {
    rangeEl.textContent = 'Yes';
    rangeEl.className = 'good';
  } else {
    rangeEl.textContent = 'No';
    rangeEl.className = 'bad';
  }
});
</script>
</body>
</html>
